---
import { Search } from "accel-record/search";
import { Direction, sortUrl } from "./sort.js";

type Props = {
  q: Search<any>;
  key: string;
  defaultOrder?: Direction;
  keys?: string[];
};

const { q, key, defaultOrder, keys } = Astro.props;
const href = sortUrl(q, key, { request: Astro.request, defaultOrder, keys });
---

<sort-link data-key={key}>
  <a href={href} class="sort-link__text">
    {Astro.slots.has("default") ? <slot /> : q.model.humanAttributeName(key)}
    <span class="sort-link__icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="feather feather-chevron-up"
      >
        <polyline points="18 15 12 9 6 15"></polyline>
      </svg>
    </span>
  </a>
</sort-link>
